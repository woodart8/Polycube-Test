# 폴리큐브 백엔드 개발자 코딩 테스트

### 개발 환경

- OpenJDK 17
- Spring Boot 3.2.1

### 라이브러리

- Spring Web
- Lombok
- H2 Database ( ID : pc, PW : 2024 )

추가로 사용한 라이브러리

- Spring Data JPA (DB 접근을 객체지향적으로 처리 가능)
- Mockito (DB 없는 환경에서도 테스트 가능)
- JUnit5 (테스트 메서드 정의 및 테스트 이름 지정)

### 개발하면서 들었던 생각

1. 예시 데이터를 보니 오름차순 정렬이 되어있지 않은데 그렇다면 로또 당첨 기준이 번호만 일치인가, 번호+순서까지 일치인가 (일단 우리나라 로또처럼 번호만 일치로 구현하였다)

`lotto` 테이블

```csv
id,number_1,number_2,number_3,number_4,number_5,number_6
1,7,28,33,2,45,19
2,26,14,41,3,22,35
3,15,29,38,6,44,21
4,31,16,42,9,23,36
5,17,30,39,10,45,24
```

2. 매주 일요일마다 배치를 돌리면 당연히 일주일간의 로또 발행내역 중에서 당첨자를 뽑아야한다. 하지만 로또 테이블에는 발행시간이 없는데 이럴 경우 전체 데이터를 기준으로 해야하는가
3. 전체 데이터를 기준으로 한다면 중복 당첨이 나오는데 중복 검사 로직까지 트랜잭션에 추가하는 것을 원하는 것인가, 아니면 중복 당첨이 허용되는 것인가 (중복 검사 로직을 추가하면 추가 쿼리가 발생하므로 성능이 좋지 않다, 따라서 추가하진 않았다)
4. 중복 당첨이 허용된다면 Winner와 Lotto는 ManyToOne관계이고, 허용되지 않는다면 OneToOne관계이다. (일단 당첨은 1번만 되어야한다고 생각해 OneToOne으로 구현하였다, 따라서 현재 하나의 로또가 2번 당첨되면 에러가 발생한다)

- [ ] Batch는 매주 일요일 0시에 실행되도록 구현한다.

5. 로또 발행 수에 대한 정보가 없어 간단하게 스케줄러로 배치 작업을 수행했는데, 만약 우리나라 로또 정도의 판매량이라면 Spring Batch를 도입하는 것이 성능상으로 좋을 것 같다.
